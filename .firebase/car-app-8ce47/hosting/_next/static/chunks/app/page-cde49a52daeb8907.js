(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3718:(e,a,t)=>{Promise.resolve().then(t.bind(t,4031))},4031:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var r=t(7437),n=t(2265);t(7138);var o=t(6548);function l(){return(0,r.jsx)("div",{children:(0,r.jsx)(o.Z,{children:"Bot\xf3n de mui"})})}var i=t(3216),s=t(6176),c=t(5870),d=t(8038),m=t(5786),p=t(511),u=t(5236),h=t(9842);let g=(0,u.ZF)({apiKey:"AIzaSyCnPFeH_LKfTUOUuTSxEBUj50DA-3Isv9o",authDomain:"car-app-8ce47.firebaseapp.com",projectId:"car-app-8ce47",storageBucket:"car-app-8ce47.appspot.com",messagingSenderId:"9657181403",appId:"1:9657181403:web:5f7697d4fc4060a2ae58fe",measurementId:"G-SYM3Z0BYS1"}),f=(0,h.ad)(g),y=async e=>{let{firstName:a,lastName:t,document:r,department:n,city:o,phone:l,email:i,habeasData:s,userCode:c}=e;try{await (0,h.ET)((0,h.hJ)(f,"users"),{firstName:a,lastName:t,document:r,department:n,city:o,phone:l,email:i,habeasData:s,userCode:c}),console.log("Usuario a\xf1adido correctamente")}catch(e){console.error("Error a\xf1adiendo el documento: ",e)}},b=async e=>{let a=(0,h.IO)((0,h.hJ)(f,"users"),(0,h.ar)("document","==",e)),t=await (0,h.PL)(a);return t.empty?null:t.docs[0].data()};var _=t(2472),x=t.n(_);let j=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=e.charAt(Math.floor(Math.random()*e.length))+e.charAt(Math.floor(Math.random()*e.length)),t=Math.floor(100+900*Math.random());return"".concat(a).concat(t)};function v(){let[e,a]=(0,n.useState)({firstName:"",lastName:"",document:"",department:"",city:"",phone:"",email:"",habeasData:!1}),[t,u]=(0,n.useState)([]),[h,g]=(0,n.useState)(""),[f,_]=(0,n.useState)(""),[v,Z]=(0,n.useState)(""),[C,N]=(0,n.useState)(""),[S,E]=(0,n.useState)([]);console.log("departamentos>> ",S),console.log("ciudades>> ",t);let D=async()=>{try{let e=await fetch("https://api-colombia.com/api/v1/Department"),a=(await e.json()).map(e=>({id:e.id,name:e.name}));console.log("est\xe1 ac\xe1?"),E(a)}catch(e){console.error("Error al obtener los departamentos:",e)}},w=async e=>{try{let a=await fetch("https://api-colombia.com/api/v1/Department/".concat(e,"/cities")),t=await a.json();u(t)}catch(e){console.error("Error al obtener las ciudades:",e)}};(0,n.useEffect)(()=>{D()},[]);let k=t=>{let{name:r,value:n}=t.target;if("department"===r){let e=S.find(e=>e.name===n);e&&(w(e.id),a(e=>({...e,[r]:n,city:""})))}else a({...e,[r]:"checkbox"===t.target.type?t.target.checked:n})},A=async t=>{if(t.preventDefault(),await b(e.document))alert("Este usuario ya est\xe1 registrado.");else{let t=j();g(t),y({...e,userCode:t}),alert("Usuario a\xf1adido con \xe9xito: ".concat(e.firstName)),a({firstName:"",lastName:"",document:"",department:"",city:"",phone:"",email:"",habeasData:!1})}},W=async()=>{let e=await b(f);e?(Z(e.userCode),N("")):(Z(""),N("A\xfan no est\xe1s registrado")),_("")};return(0,r.jsxs)("div",{className:x().page,children:[(0,r.jsx)(l,{}),(0,r.jsxs)("form",{onSubmit:A,className:x().form,children:[(0,r.jsx)(i.Z,{label:"Nombre",name:"firstName",value:e.firstName,onChange:k,required:!0,fullWidth:!0,margin:"normal",inputProps:{pattern:"[A-Za-z ]+"}}),(0,r.jsx)(i.Z,{label:"Apellido",name:"lastName",value:e.lastName,onChange:k,required:!0,fullWidth:!0,margin:"normal",inputProps:{pattern:"[A-Za-z ]+"}}),(0,r.jsx)(i.Z,{label:"C\xe9dula",name:"document",value:e.document,onChange:k,required:!0,fullWidth:!0,margin:"normal",inputProps:{pattern:"[0-9]+"}}),(0,r.jsxs)(s.Z,{label:"Departamento",name:"department",value:e.department,onChange:k,required:!0,fullWidth:!0,displayEmpty:!0,margin:"normal",children:[(0,r.jsx)(c.Z,{value:"",disabled:!0,children:"Selecciona tu Departamento"}),S.length>0?S.map(e=>(0,r.jsx)(c.Z,{value:e.name,children:e.name},e.id)):(0,r.jsx)(c.Z,{disabled:!0,children:"No hay departamentos disponibles"})]}),(0,r.jsxs)(s.Z,{label:"Ciudad",name:"city",value:e.city,onChange:k,required:!0,fullWidth:!0,displayEmpty:!0,margin:"normal",disabled:!e.department,children:[(0,r.jsx)(c.Z,{value:"",disabled:!0,children:"Selecciona tu Ciudad"}),t.map(e=>(0,r.jsxs)(c.Z,{value:e.name,children:[e.name," "]},e.id))]}),(0,r.jsx)(i.Z,{label:"Celular",name:"phone",value:e.phone,onChange:k,required:!0,fullWidth:!0,margin:"normal",inputProps:{pattern:"[0-9]+"}}),(0,r.jsx)(i.Z,{label:"Correo Electr\xf3nico",name:"email",value:e.email,onChange:k,required:!0,fullWidth:!0,margin:"normal",type:"email"}),(0,r.jsx)(d.Z,{control:(0,r.jsx)(m.Z,{name:"habeasData",checked:e.habeasData,onChange:k,required:!0}),label:"Autorizo el tratamiento de mis datos de acuerdo con la finalidad establecida en la pol\xedtica de protecci\xf3n de datos personales."}),(0,r.jsx)(o.Z,{type:"submit",variant:"contained",color:"primary",children:"Registrar Usuario"}),h&&(0,r.jsxs)(p.Z,{variant:"body1",color:"primary",style:{marginTop:"10px"},children:["Tu c\xf3digo para participar en el sorteo es: ",h]})]}),(0,r.jsxs)("div",{className:x().searchSection,children:[(0,r.jsx)(p.Z,{variant:"h6",gutterBottom:!0,children:"Consultar C\xf3digo del Sorteo"}),(0,r.jsx)(i.Z,{label:"N\xfamero de Documento",value:f,onChange:e=>{_(e.target.value)},fullWidth:!0,margin:"normal"}),(0,r.jsx)(o.Z,{onClick:W,variant:"contained",color:"secondary",children:"Consultar"}),v&&(0,r.jsxs)(p.Z,{variant:"body1",color:"primary",children:["Tu c\xf3digo es: ",v]}),C&&(0,r.jsx)(p.Z,{variant:"body1",color:"error",children:C})]})]})}},2472:e=>{e.exports={page:"page_page__556_G",main:"page_main__nw1Wk",ctas:"page_ctas__rfsth",primary:"page_primary__2CBMe",secondary:"page_secondary__jzhTV",footer:"page_footer__F3MD0",logo:"page_logo__ikIZE",form:"page_form__NxPAx",searchSection:"page_searchSection__4b2nW"}}},e=>{var a=a=>e(e.s=a);e.O(0,[305,358,754,130,215,744],()=>a(3718)),_N_E=e.O()}]);